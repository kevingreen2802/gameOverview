<!-- Opening the form-document -->
<!DOCTYPE html/>
<html>
<head>
    <!-- Adding a title -->
    <title>Store Your Game</title>
    <!-- Adding parameter for character encoding -->
    <meta charset="utf-8"/>
    <!-- Inserting css stylesheet -->
    <link rel="stylesheet" href="web/css/spieleverwaltung.css">
</head>
<body>
<!-- headline with style classes -->
<div class="theme-gamecube header"><a href="index.php" class="header"> Video Game Overview</a></div>
<!-- Contains body specific style class -->
<div class="theme-gamecube body"><br>
    <!-- Creating a button with an onclick event which contains a javacript code to alter between different styles -->
    <button type="button" onclick="switchClasses();">Try another Style!</button><br/><br>
    <!--Search a game by name, developer, device, company or medium -->


    <input id="toggle" type="checkbox">
    <label for="toggle">Search</label>
    <div id="expand"><br>
    <form name="searchGame" action="index.php" method="GET">
        <input type="search" name="name" class="tablesizegames theme-gamecube input" placeholder="Insert Name...">
        <input type="search" name="developer" class="tablesizedevs theme-gamecube input" placeholder="Insert Developer...">
        <input type="search" name="device" class="tablesizedevice theme-gamecube input" placeholder="Insert Device...">
        <input type="search" name="company" class="tablesizemanu theme-gamecube input" placeholder="Insert Company...">
        <input type="search" name="medium" class="tablesizemedium theme-gamecube input" placeholder="Insert Medium...">
        <input type="submit" class="search" value="Search">
        <input type="reset" class ="reset" value="Reset">
    </form>
    </div>
    <br>


    <!-- Creating the headlines for every column -->
    <div class='theme-gamecube descriptionfont tablesizegames'>Game</div>
    <div class='theme-gamecube descriptionfont tablesizedevs '>Developer</div>
    <div class='theme-gamecube descriptionfont tablesizedevice'>Device</div>
    <div class='theme-gamecube descriptionfont tablesizemanu'>Company</div>
    <div class='theme-gamecube descriptionfont tablesizemedium '>Medium</div>
    <div class='theme-gamecube descriptionfont '>Actions</div>
    <!-- Creating table form for new game entry -->
    <form name='createNewGame' action='index.php' method='post'>
        <input class='theme-gamecube input tablesizegames' name='spieleName' size='20' required>
        <select class='theme-gamecube selection tablesizedevs' name='spieleEntwickler'>
            <!-- Filling the select field with options by using a foreach function with the different developer names-->
            <?php foreach($developers as $key => $developer) : ?>
            <option value='<?php echo $developer["id"]; ?>'><?php echo $developer['name']; ?></option>
            <?php endforeach; ?>
        </select>
        <!-- Creating a select field for choosing the device -->
        <select class='theme-gamecube selection tablesizedevice' name='geräteName'>
            <!-- filling the select field with options by using a foreach function with the different device names -->
            <?php foreach($devices as $key => $device) :?>
            <option value='<?php echo $device["id"]; ?>'><?php echo $device['name']; ?></option>
            <?php endforeach; ?>
        </select>
        <!-- Creating an input field for the companies, field is disabled. Field is automatically filled according to devices -->
        <input class='theme-gamecube selection tablesizemanu' name='herstellerName' disabled>
        <!-- Creating a select field for choosing whether the game is digital or retail -->
        <select class='theme-gamecube selection tablesizemedium' name='spieleMedium'>
            <!-- filling the select field with options by using a foreach function with the different medium types -->
            <?php foreach($mediumTypes as $key => $mediumType) : ?>
            <option value='<?php echo $mediumType["id"]; ?>'><?php echo $mediumType['name']; ?></option>
            <?php endforeach; ?>
        </select>
        <!-- Creating a button for adding the new inserted game into the database -->
        <button type='submit' class='theme-gamecube add' name='createGame'> Add new game</button>
    </form>
    <?php if (empty($games)) : ?>
    <p>No data found.</p>
    <?php endif; ?>
    <!-- Creating multiple tables with the use of a foreach function to display games that are already saved in the database -->
    <?php foreach($games as $index => $entry) : ?>
    <form name='updateGame <?php echo $index; ?>' action='index.php' method='post'>
        <!-- submitting the Game ID as a hidden object -->
        <input type = 'hidden' name='gameID' value='<?php echo $entry["Spiele-ID"]; ?>'/>
        <!-- Creating an input field to display game titles -->
        <input class='theme-gamecube input tablesizegames' name='spieleName' value='<?php echo $entry["Spiele-Name"]; ?>' size='20'/>
        <!-- Creating a select field to display the developer -->
        <select class='theme-gamecube selection tablesizedevs' name='developers'>
            <?php foreach($developers as $key => $developer) : ?>
            <?php if($developer['name'] == $entry['Entwickler-Name']) : ?>
            <option class='tablesizedevs' value='<?php echo $developer["id"]; ?>' selected><?php echo $developer['name']; ?></option>
            <?php else : ?>
            <option value='<?php echo $developer["id"]; ?>'><?php echo $developer['name']; ?></option>
            <?php endif; ?>
            <?php endforeach; ?>
        </select>
        <!-- Creating a select field to display the device by using a foreach function -->
        <select class='theme-gamecube selection tablesizedevice' name='devices'>
            <?php foreach($devices as $key => $device) : ?>
            <!-- Check if the devices are identical to display the right device, ... -->
            <?php if ($device['name'] == $entry['Geräte-Name']) : ?>
            <option value='<?php echo $device["id"]; ?>'selected><?php echo $device['name']; ?></option>
            <!-- ... otherwise display the default device -->
            <?php else : ?>
            <option value='<?php echo $device["id"]; ?>'><?php echo $device['name']; ?></option>
            <?php endif; ?>
            <?php endforeach; ?>
        </select>
        <!-- Creating a disabled, non-interactive input field to display the company.
        Field is automatically filled with the right company according to the device -->
        <input class='theme-gamecube input tablesizemanu' name='spieleName' disabled value='<?php echo $entry["Hersteller-Name"]; ?>'/>
        <!-- Creating a select field to display the medium types -->
        <select class='theme-gamecube selection tablesizemedium' name='mediumtypes'>
            <?php foreach($mediumTypes as $key => $mediumType) : ?>
            <?php if ($mediumType['name'] == $entry['Medium-Name']) : ?>
            <option value='<?php echo $mediumType["id"]; ?>'selected><?php echo $mediumType['name']; ?></option>
            <?php else : ?>
            <option value='<?php echo $mediumType["id"]; ?>'><?php echo $mediumType['name']; ?></option>
            <?php endif; ?>
            <?php endforeach; ?>
        </select>
        <!-- Creating a button which causes a game entry to update -->
        <button class='theme-gamecube save buttonsize' type='submit' name='updateGame'>Save</button>
        <!-- Creating a button which causes a game to be deleted -->
        <button class='theme-gamecube delete buttonsize' type='submit' name='gameToDelete'>Delete</button>
    <!-- End of form -->
    </form>
    <?php endforeach; ?>
</div>
<!-- Including the javascript code -->
<script src="web/js/spieleverwaltung.js"></script>
</body>
</html>
